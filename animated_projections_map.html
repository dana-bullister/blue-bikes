<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js and projection library -->
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>

<!-- create an svg element where the map will live -->
<svg id="my_map"></svg>

<script>

// store some variables for svg and attributes
let my_map = d3.select("#my_map"),
    map_width = 400,
    map_height = 300;

// set width and height
my_map
    .attr("width",map_width)
    .attr("height",map_height);

// set projection, scale, and position
let map_projection = d3.geoNaturalEarth()
    .scale(map_width / 1.3 / Math.PI)
    .translate([map_width / 2, map_height / 2])

// Load external data
d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson", function(map_data){

    // draw the map
    let feature_group = my_map.append("g");
    let features = feature_group.selectAll("map_features");
    let data_points = features.data(map_data.features)
      .enter() // for each each data point
        .append("path")
          .attr("fill", "green")
          .attr("id", "my_path")
          .attr("d", d3.geoPath()
              .projection(map_projection)
          )
          .style("stroke", "white");


    let init_delay = 0;
    let delay_increment = 1500;
    let trans_duration = 1500;

    // update map projection
    map_projection = d3.geoAiry()
    data_points
      .transition()
        .duration(2000)
      .attr("d", d3.geoPath()
          .projection(map_projection))

})

</script>
